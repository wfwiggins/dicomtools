---

title: DICOM Tools


keywords: fastai
sidebar: home_sidebar

summary: "A Python toolkit for parsing and analyzing metadata from DICOM files."
description: "A Python toolkit for parsing and analyzing metadata from DICOM files."
nb_path: "index.ipynb"
---
<!--

#################################################
### THIS FILE WAS AUTOGENERATED! DO NOT EDIT! ###
#################################################
# file to edit: index.ipynb
# command to build the docs after a change: nbdev_build_docs

-->

<div class="container" id="notebook-container">
        
    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

</div>
    {% endraw %}

<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>This project utilizes the <code>pydicom</code> and <code>fastcore</code> libraries. It borrows ideas (and some code) from the <code>fastai.medical.imaging</code> library (<a href="https://github.com/fastai/fastai/blob/master/fastai/medical/imaging.py">source</a>).</p>
<p>The metadata preprocessing and series selection algorithm are recreated from the paper by Gauriau et al. (<em>reference below</em>), in which a Random Forest classifier is trained to predict the sequence type (e.g. T1, T2, FLAIR, ...) of series of images from brain MRI. Such a tool may be used to select the appropriate series of images for input into a machine learning pipeline.</p>
<blockquote><p><em>Reference:</em> Gauriau R, et al. Using DICOM Metadata for Radiological Image Series Categorization: a Feasibility Study on Large Clinical Brain MRI Datasets. <em>Journal of Digital Imaging</em>. 2020 Jan; 33:747â€“762. (<a href="https://link.springer.com/article/10.1007/s10278-019-00308-x">link to paper</a>)</p>
</blockquote>

</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h2 id="Install">Install<a class="anchor-link" href="#Install"> </a></h2>
</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<ol>
<li><code>git clone</code> the repository</li>
<li><code>cd</code> into the repo</li>
<li><code>pip install .</code> (include the <code>-e</code> flag for an editable install)</li>
</ol>

</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h2 id="How-to-use">How to use<a class="anchor-link" href="#How-to-use"> </a></h2>
</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>Read a DICOM file:</p>

</div>
</div>
</div>
    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="kn">from</span> <span class="nn">pydicom.data</span> <span class="kn">import</span> <span class="n">get_testdata_file</span>

<span class="n">fn</span> <span class="o">=</span> <span class="n">Path</span><span class="p">(</span><span class="n">get_testdata_file</span><span class="p">(</span><span class="s2">&quot;MR_small.dcm&quot;</span><span class="p">))</span>
<span class="n">ds</span> <span class="o">=</span> <span class="n">fn</span><span class="o">.</span><span class="n">dcmread</span><span class="p">(</span><span class="n">fn</span><span class="p">)</span>
<span class="n">ds</span><span class="o">.</span><span class="n">file_meta</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">

<div class="output_area">



<div class="output_text output_subarea output_execute_result">
<pre>(0002, 0000) File Meta Information Group Length  UL: 190
(0002, 0001) File Meta Information Version       OB: b&#39;\x00\x01&#39;
(0002, 0002) Media Storage SOP Class UID         UI: MR Image Storage
(0002, 0003) Media Storage SOP Instance UID      UI: 1.3.6.1.4.1.5962.1.1.4.1.1.20040826185059.5457
(0002, 0010) Transfer Syntax UID                 UI: Explicit VR Little Endian
(0002, 0012) Implementation Class UID            UI: 1.3.6.1.4.1.5962.2
(0002, 0013) Implementation Version Name         SH: &#39;DCTOOL100&#39;
(0002, 0016) Source Application Entity Title     AE: &#39;CLUNIE1&#39;</pre>
</div>

</div>

</div>
</div>

</div>
    {% endraw %}

<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>Import a select subset of DICOM metadata into a <code>pandas.DataFrame</code>. The subset is defined in <code>dicomtools.core</code> and is based on the metadata used for the series selection algorithm in the paper referenced above.</p>

</div>
</div>
</div>
    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">df</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="o">.</span><span class="n">from_dicoms</span><span class="p">([</span><span class="n">fn</span><span class="p">])</span><span class="o">.</span><span class="n">drop</span><span class="p">(</span><span class="s1">&#39;fname&#39;</span><span class="p">,</span> <span class="n">axis</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>
<span class="n">df</span><span class="o">.</span><span class="n">T</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">

<div class="output_area">


<div class="output_html rendered_html output_subarea output_execute_result">
<div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>0</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>ImageType</th>
      <td>[DERIVED, SECONDARY, OTHER]</td>
    </tr>
    <tr>
      <th>SOPClassUID</th>
      <td>MR Image Storage</td>
    </tr>
    <tr>
      <th>ContrastBolusAgent</th>
      <td></td>
    </tr>
    <tr>
      <th>ScanningSequence</th>
      <td>SE</td>
    </tr>
    <tr>
      <th>SequenceVariant</th>
      <td>NONE</td>
    </tr>
    <tr>
      <th>ScanOptions</th>
      <td></td>
    </tr>
    <tr>
      <th>MRAcquisitionType</th>
      <td>3D</td>
    </tr>
    <tr>
      <th>SliceThickness</th>
      <td>0.8</td>
    </tr>
    <tr>
      <th>RepetitionTime</th>
      <td>4000</td>
    </tr>
    <tr>
      <th>EchoTime</th>
      <td>240</td>
    </tr>
    <tr>
      <th>EchoTrainLength</th>
      <td>None</td>
    </tr>
    <tr>
      <th>ImageOrientationPatient</th>
      <td>[1.0000, 0.0000, 0.0000, 0.0000, 1.0000, 0.0000]</td>
    </tr>
    <tr>
      <th>PhotometricInterpretation</th>
      <td>MONOCHROME2</td>
    </tr>
    <tr>
      <th>PixelSpacing</th>
      <td>[0.3125, 0.3125]</td>
    </tr>
  </tbody>
</table>
</div>
</div>

</div>

</div>
</div>

</div>
    {% endraw %}

</div>
 

